---
import Differentiator from "../components/Differentiator.astro";
import LinkColumn from "../components/LinkColumn.astro";
import Layout from "../layouts/Layout.astro";
---

<Layout title="Frontend Mentor | Insure landing page">
  <!-- TODO: handle zoom-in issues -->
  <!-- TODO: change spacer padding bottoms to margin bottoms  -->
  <!-- TODO: handle font loading layout shifts  -->
  <header>
    <div class="mx-auto max-w-6xl">
      <div class="sm:flex sm:items-center sm:justify-between sm:px-6 sm:py-4">
        <div class="flex items-center justify-between px-6 py-4 sm:p-0">
          <div>
            <img src="images/logo.svg" alt="insure" width="112" height="18" />
          </div>

          <button
            id="mobile-nav-toggle"
            aria-controls="mobile-nav"
            aria-expanded="false"
            class="sm:hidden"
          >
            <img
              src="images/icon-hamburger.svg"
              alt=""
              width="32"
              height="32"
            />
            <span class="sr-only">Toggle menu</span>
          </button>
        </div>

        <div
          id="mobile-nav"
          class="relative z-0 hidden bg-my-neutral-900 px-6 pt-12 pb-72 sm:block sm:bg-transparent sm:p-0"
        >
          <nav
            class="flex flex-col gap-8 text-center sm:flex-row sm:items-center"
          >
            <a
              href="#"
              class="inline-block font-bold uppercase tracking-widest text-my-neutral-100 sm:text-xs sm:text-my-neutral-800 sm:hover:text-my-neutral-900"
            >
              How we work
            </a>
            <a
              href="#"
              class="inline-block font-bold uppercase tracking-widest text-my-neutral-100 sm:text-xs sm:text-my-neutral-800 sm:hover:text-my-neutral-900"
            >
              Blog
            </a>
            <a
              href="#"
              class="inline-block font-bold uppercase tracking-widest text-my-neutral-100 sm:text-xs sm:text-my-neutral-800 sm:hover:text-my-neutral-900"
            >
              Account
            </a>
            <a
              href="#"
              class="inline-block border border-my-neutral-100 py-2 px-6 text-center font-bold uppercase tracking-widest text-my-neutral-100 hover:bg-my-neutral-900 hover:text-my-neutral-100 sm:border-my-neutral-900 sm:text-xs sm:text-my-neutral-900"
            >
              View plans
            </a>
          </nav>
          <img
            src="images/bg-pattern-mobile-nav.svg"
            class="absolute right-0 bottom-0 max-h-52 w-full sm:hidden"
            alt=""
          />
        </div>
      </div>
    </div>
  </header>

  <main>
    <div class="overflow-hidden">
      <section class="relative z-0">
        <!-- Decoration for the section -->
        <!-- TODO: handle responsive decoration & image switching -->
        <div
          class="absolute top-0 left-0 -z-10 h-full w-full bg-primary-900 lg:h-5/6"
        >
        </div>

        <!-- Actual content -->
        <div class="mx-auto max-w-6xl">
          <div class="sm:grid sm:grid-cols-2 sm:gap-12 sm:px-6 sm:pt-24">
            <!-- TODO: image loading is pending -->
            <!-- TODO: fix weird image right margin -->
            <div class="order-1">
              <picture>
                <source
                  srcset="images/image-intro-desktop.jpg"
                  type="image/jpeg"
                  width="540"
                  height="650"
                  media="(min-width: 640px)"
                />
                <img
                  src="images/image-intro-mobile.jpg"
                  alt="A familiy of four taking each other's hand"
                  width="375"
                  height="451"
                  class="h-full w-full object-cover object-left"
                />
              </picture>
            </div>

            <div
              class="relative z-0 px-4 py-24 text-center sm:static sm:z-auto sm:p-0 sm:text-left"
            >
              <!-- Line decoration -->
              <picture
                class="absolute top-0 left-0 -z-10 sm:top-auto sm:-bottom-52 sm:hidden lg:block"
              >
                <source
                  srcset="images/bg-pattern-intro-left-desktop.svg"
                  type="image/svg+xml"
                  width="195"
                  height="504"
                  media="(min-width: 640px)"
                />
                <img
                  src="images/bg-pattern-intro-left-mobile.svg"
                  alt=""
                  width="168"
                  height="165"
                />
              </picture>

              <picture
                class="absolute right-0 -bottom-44 -z-10 sm:bottom-auto sm:-top-10 sm:hidden lg:block"
              >
                <source
                  srcset="images/bg-pattern-intro-right-desktop.svg"
                  type="image/svg+xml"
                  width="436"
                  height="593"
                  media="(min-width: 640px)"
                />
                <img
                  src="images/bg-pattern-intro-right-mobile.svg"
                  alt=""
                  width="124"
                  height="330"
                />
              </picture>

              <div class="hidden h-px w-40 bg-my-neutral-100 sm:mb-12 sm:block">
              </div>
              <!-- TODO: make space breaks where they should go -->
              <h1
                class="font-dm-serif text-5xl text-my-neutral-100 lg:text-6xl"
              >
                Humanizing <br /> your insurance.
              </h1>
              <p class="mt-4 leading-7 text-my-neutral-100">
                Get your life insurance coverage easier and faster. We blend our
                expertise and technology to help you find the plan that's right
                for you. Ensure you and your loved ones are protected.
              </p>
              <a
                href="#"
                class="my-8 inline-block border border-my-neutral-100 py-2 px-6 text-center text-sm font-bold uppercase tracking-widest text-my-neutral-100 hover:bg-my-neutral-100 hover:text-my-neutral-900 sm:font-normal"
              >
                View plans
              </a>
            </div>
          </div>
        </div>
      </section>

      <section>
        <div class="mx-auto max-w-6xl">
          <div class="mt-36 px-6 text-center sm:text-left">
            <div class="mx-auto h-px w-40 bg-primary-900 sm:mx-0"></div>
            <h1 class="mt-12 font-dm-serif text-5xl sm:text-6xl">
              We're different
            </h1>
            <!-- TODO: make grid responsive -->
            <div class="mt-24 grid gap-16 sm:grid-cols-3">
              <Differentiator
                title="Snappy Process"
                description="Our application process can be completed in minutes, not hours. Don't get stuck filling in tedious forms."
                iconSrc="images/icon-snappy-process.svg"
              />
              <Differentiator
                title="Affordable Prices"
                description="We don't want you worrying about high monthly costs. Our prices may be low, but we still offer the best coverage possible."
                iconSrc="images/icon-affordable-prices.svg"
              />
              <Differentiator
                title="People First"
                description="Our plans aren't full of conditions and clauses to prevent payouts. We make sure you're covered when you need it."
                iconSrc="images/icon-people-first.svg"
              />
            </div>
          </div>
        </div>
      </section>

      <section>
        <div class="mx-auto max-w-6xl">
          <div class="mt-40 px-6">
            <div
              class="relative z-0 flex flex-col items-center justify-between gap-10 bg-primary-900 px-8 py-20 text-center sm:flex-row sm:px-20 sm:py-16 sm:text-left"
            >
              <!-- Decoration -->
              <picture class="absolute top-0 right-0 -z-10 h-full">
                <source
                  srcset="images/bg-pattern-how-we-work-desktop.svg"
                  type="image/svg+xml"
                  media="(min-width: 768px)"
                  width="434"
                  height="250"
                />
                <img
                  src="images/bg-pattern-how-we-work-mobile.svg"
                  alt=""
                  width="176"
                  height="317"
                  class="h-full"
                />
              </picture>

              <!-- Actual content -->
              <h1
                class="font-dm-serif text-4xl text-my-neutral-100 sm:text-5xl"
              >
                Find out more <br />about how we work
              </h1>
              <a
                href="#"
                class="inline-block border border-my-neutral-100 py-2 px-6 text-center text-sm uppercase tracking-widest text-my-neutral-100 hover:bg-my-neutral-100 hover:text-my-neutral-900"
              >
                How we work
              </a>
            </div>
          </div>
        </div>
      </section>
    </div>
  </main>

  <footer class="relative z-0 bg-my-neutral-100">
    <div class="overflow-hidden">
      <!-- Decoration for the section -->
      <picture class="absolute top-0 left-0 -z-10">
        <source
          srcset="images/bg-pattern-footer-desktop.svg"
          type="image/svg+xml"
          media="(min-width: 768px)"
          width="528"
          height="231"
        />
        <img
          src="images/bg-pattern-footer-mobile.svg"
          alt=""
          width="374"
          height="173"
        />
      </picture>

      <!-- Actual content -->
      <div class="mx-auto max-w-6xl">
        <div class="px-6 py-24">
          <div
            class="flex flex-col items-center gap-8 border-b border-my-neutral-800 pb-8 sm:flex-row sm:justify-between"
          >
            <div>
              <img src="images/logo.svg" alt="insure" width="112" height="18" />
            </div>

            <nav class="flex items-center gap-4">
              {
                ["facebook", "twitter", "pinterest", "instagram"].map(
                  (social) => (
                    <a href="#">
                      <img
                        src={`images/icon-${social}.svg`}
                        alt=""
                        width="24"
                        height="24"
                      />
                      <span class="sr-only">{social}</span>
                    </a>
                  )
                )
              }
            </nav>
          </div>

          <div class="mt-14 grid gap-12 sm:grid-cols-4">
            <LinkColumn
              title="Our company"
              links={["How we work", "Why Insure?", "View plans", "Reviews"]}
            />
            <LinkColumn
              title="Help me"
              links={["FAQ", "Terms of use", "Privacy policy", "Cookies"]}
            />
            <LinkColumn
              title="Contact"
              links={["Sales", "Support", "Live chat"]}
            />
            <LinkColumn
              title="Others"
              links={["Careers", "Press", "Licenses"]}
            />
          </div>

          <p class="mt-12 text-center text-sm">
            Challenge by
            <a
              href="https://www.frontendmentor.io?ref=challenge"
              target="_blank"
              class="font-bold text-my-neutral-900 hover:underline"
            >
              Frontend Mentor.
            </a>Coded by Pedro Alonso Moreno Salcedo.
          </p>
        </div>
      </div>
    </div>
  </footer>
</Layout>

<script>
  const mobileNav = document.querySelector<HTMLButtonElement>("#mobile-nav");
  const mobileNavToggle =
    document.querySelector<HTMLDivElement>("#mobile-nav-toggle");
  const mobileNavToggleImage = document.querySelector<HTMLImageElement>(
    "#mobile-nav-toggle img"
  );

  if (mobileNav && mobileNavToggle && mobileNavToggleImage) {
    let isNavOpen = false;
    mobileNavToggle.addEventListener("click", () => {
      if (!isNavOpen) {
        mobileNav.classList.remove("hidden");
        mobileNav.classList.add("block");

        mobileNavToggle.setAttribute("aria-expanded", "true");
        mobileNavToggleImage.setAttribute("src", "images/icon-close.svg");

        isNavOpen = true;
      } else {
        mobileNav.classList.remove("block");
        mobileNav.classList.add("hidden");

        mobileNavToggle.setAttribute("aria-expanded", "false");
        mobileNavToggleImage.setAttribute("src", "images/icon-hamburger.svg");

        isNavOpen = false;
      }
    });
  } else {
    console.error("ERROR: elements were not found on the DOM");
  }
</script>
